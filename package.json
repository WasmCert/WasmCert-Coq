{
	"name": "wasm_coq",
	"version": "1.0",
	"description":
		"Wasm formalisation in Coq, following the AFP formalisation of Conrad Watt",
	"license": "MIT",
	"esy": {
		"buildsInSource": "_build",
		"buildEnv": {
			"COQBIN": "#{@opam/coq.bin}/",
			"COQLIB": "#{@opam/coq.lib}/coq/",
			"COQPATH": "#{coq-iris.install}/user-contrib:#{@opam/coq-stdpp.install}/user-contrib:#{coq-mathcomp-ssreflect.install}/user-contrib:#{coq-flocq.install}/coq:#{compcert.install}/coq:#{strong-induction.install}/lib/coq/user-contrib/:#{parseque.install}/lib/coq/user-contrib/",
			"VSCODESETTINGS": "{\"coqtop.binPath\": \"#{@opam/coq.root}/bin\",\"coqtop.args\":[\"-coqlib\",\"#{@opam/coq.root}\",\"-R\",\"#{coq-iris.install}/user-contrib\",\"iris\",\"-R\",\"#{@opam/coq-stdpp.install}/user-contrib\",\"stdpp\",\"-R\",\"#{coq-mathcomp-ssreflect.root}/mathcomp\",\"mathcomp\",\"-R\",\"#{coq-flocq.install}/coq\",\"Flocq\",\"-R\",\"#{compcert.root}\",\"compcert\",\"-R\",\"#{strong-induction.root}\",\"StringInduction\",\"-R\",\"#{parseque.root}\",\"parseque\",\"-R\",\"#{self.root}/_build/default/theories\",\"\"]}"
		},
		"build": "make"
	},
	"dependencies": {
		"@opam/cmdliner": "1.0.4",
		"@opam/coq": "8.10.1",
		"@opam/dune": "~2.3",
		"@opam/menhir": "20181113",
		"compcert": "3.6",
		"coq-flocq": "3.2.0",
		"coq-iris": "*",
		"@opam/coq-stdpp": "*",
		"strong-induction": "*",
		"coq-mathcomp-ssreflect": "*",
		"parseque": "*"
	},
	"devDependencies": {},
	"resolutions": {
		"coq-mathcomp-ssreflect": {
			"source":
				"github:math-comp/math-comp#ab54764c15886289107ec43b94bc355ada662c4c",
			"override": {
				"dependencies": {
					"@opam/coq": "*"
				},
				"buildsInSource": true,
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}/",
					"COQLIB": "#{@opam/coq.lib}/coq/",
					"COQPATH": "#{@opam/coq.lib}/coq/user-contrib/",
					"COQMAKEFILEOPTIONS": "DESTDIR = '#{self.install}' COQMF_WINDRIVE = '#{@opam/coq.lib}/coq'"
				},
				"build": [
					[ "make", "-C", "mathcomp/ssreflect", "-j", "3" ],
					[ "make", "-C", "mathcomp/ssreflect", "install" ]
				]
			}
		},
		"coq-flocq": {
			"source":
				"git:https://gitlab.inria.fr/flocq/flocq.git#a9be51660cd865d323b0b3bbb9faa793856ea0de",
			"version": "3.2.0",
			"override": {
				"dependencies": { "@opam/coq": "8.10.1" },
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}",
					"COQLIB": "#{@opam/coq.lib}/coq/",
					"COQPATH": "#{@opam/coq.lib}/coq/user-contrib/"
				},
				"build": [
					[ "./autogen.sh" ],
					[ "./configure", "--libdir=#{self.install}/coq/Flocq" ],
					[ "./remake", "--jobs=2" ],
					[ "./remake", "install" ]
				]
			}
		},
		"compcert":
			"github:Mbodin/CompCert#db71ae2cb478db5a7914123c42c69ec9a5731064",
		"coq-iris": {
			"source":
				"git:https://gitlab.mpi-sws.org/iris/iris.git#fad7bbcf97bf47131c934e54f53fd8f178be568c",
			"override": {
				"buildsInSource": true,
				"dependencies": {
					"@opam/coq": "*",
					"@opam/coq-stdpp": "1.2.1"
				},
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}/",
					"COQLIB": "#{@opam/coq.lib}/coq/",
					"COQPATH": "#{@opam/coq-stdpp.install}/user-contrib/"
				},
				"build": [
					[ "#{@opam/coq.bin}/coq_makefile", "-f", "_CoqProject", "-o", "Makefile.coq",
						"DESTDIR", "=", "#{self.install}", "COQMF_WINDRIVE", "=", "#{@opam/coq.lib}/coq" ],
					[ "make", "-j4" ],
					[ "make", "install" ]
				]
			}
		},
		"@opam/coq-stdpp": {
			"source":
				"git:https://gitlab.mpi-sws.org/iris/stdpp.git#0e698840c2d4fb589fb327c6a53feca50cda21cb",
			"version": "1.2.1",
			"override": {
				"dependencies": {
					"@opam/coq": "*"
				},
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}/",
					"COQLIB": "#{@opam/coq.lib}/coq/",
					"COQPATH": "#{@opam/coq.lib}/coq/user-contrib/"
				},
				"build": [
					[ "#{@opam/coq.bin}/coq_makefile", "-f", "_CoqProject", "-o", "Makefile.coq",
						"DESTDIR", "=", "#{self.install}", "COQMF_WINDRIVE", "=", "#{@opam/coq.lib}/coq" ],
					[ "make", "-j4" ],
					[ "make", "install" ]
				]
			}
		},
		"strong-induction": "github:Mbodin/strong-induction#0779e72f0f4c371311b60009606c34fc1f8cd01a",
		"parseque": "github:Mbodin/parseque#c33d4ae040714c7d880d036c396a07cf849b4ff0"
	}
}
